@model CCM.Models.PatientMedicalHistory_MedicationOTC

<style>
    .checkboxes {
        width: 25px;
        height: 23px;
        margin-top: -15px;
    }

    .shortTextBox { width: 365px !important; }
    .checkboxLabels { margin-top: 3px; }
    #shiftRight { margin-left: 15px;}
    .small { font-size: 1.05em; }
</style>

@Html.Action("_CcmActivityLinks", "CcmStatus", new { patientId = Model.PatientId })
<h3 class="pageTitle text-info">CURRENT MEDICATIONS</h3>

<br/><br/>
     <div class="row">
         <div class="col-sm-12" id="divAddMedication"></div>
     </div>
     <hr id="line" />
<p class="greenText"><b>Prescription Medications</b></p>

<div class="row">
    <div class="col-sm-12" id="divMedicationsList"></div>
</div>

<hr /><br />
<div class="container">
    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()
        @Html.HiddenFor(model => model.PatientId)
        @Html.HiddenFor(model => model.Id)

        <div class="form-horizontal">
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })

            <p class="greenText"><b>Over The Counter (OTC) Medications</b></p>
            <b>Please, Indicate Those You Use Regularly or Ocassionally.</b>

            <br /><br /><br />
            <div id="shiftRight">
                <div class="form-group">
                    @Html.CheckBoxFor(model => model.PainReliever, new { @class = "col-md-1 checkboxes" })
                    @Html.Label("Pain Reliever", new { @class = "col-md-2 checkboxLabels" })

                    @Html.RadioButtonFor(model => model.PainRelieverFrequency, true)
                    @Html.Label("Regularly")

                    @Html.RadioButtonFor(model => model.PainRelieverFrequency, false)
                    @Html.Label("Occasionally")
                
                    @Html.EditorFor(model => model.PainRelieverNote, new { htmlAttributes = new { @class = "form-control border-input shortTextBox" } })
                </div>

                <div class="form-group">
                    @Html.CheckBoxFor(model => model.DietAids, new { @class = "col-md-1 checkboxes" })
                    @Html.Label("Diet Aids", new { @class = "col-md-2 checkboxLabels" })

                    @Html.RadioButtonFor(model => model.DietAidsFrequency, true)
                    @Html.Label("Regularly")

                    @Html.RadioButtonFor(model => model.DietAidsFrequency, false)
                    @Html.Label("Occasionally")
                
                    @Html.EditorFor(model => model.DietAidsNote, new { htmlAttributes = new { @class = "form-control border-input shortTextBox" } })
                </div>

                <div class="form-group">
                    @Html.CheckBoxFor(model => model.SleepAids, new { @class = "col-md-1 checkboxes" })
                    @Html.Label("Sleep Aids", new { @class = "col-md-2 checkboxLabels" })

                    @Html.RadioButtonFor(model => model.SleepAidsFrequency, true)
                    @Html.Label("Regularly")

                    @Html.RadioButtonFor(model => model.SleepAidsFrequency, false)
                    @Html.Label("Occasionally")
                
                    @Html.EditorFor(model => model.SleepAidsNote, new { htmlAttributes = new { @class = "form-control border-input shortTextBox" } })
                </div>

                <div class="form-group">
                    @Html.CheckBoxFor(model => model.Laxatives, new { @class = "col-md-1 checkboxes" })
                    @Html.Label("Laxatives", new { @class = "col-md-2 checkboxLabels" })

                    @Html.RadioButtonFor(model => model.LaxativesFrequency, true)
                    @Html.Label("Regularly")

                    @Html.RadioButtonFor(model => model.LaxativesFrequency, false)
                    @Html.Label("Occasionally")
                
                    @Html.EditorFor(model => model.LaxativesNote, new { htmlAttributes = new { @class = "form-control border-input shortTextBox" } })
                </div>

                <div class="form-group">
                    @Html.CheckBoxFor(model => model.AntiDiarrheal, new { @class = "col-md-1 checkboxes" })
                    @Html.Label("Antidiarrheal", new { @class = "col-md-2 checkboxLabels" })

                    @Html.RadioButtonFor(model => model.AntiDiarrhealFrequency, true)
                    @Html.Label("Regularly")

                    @Html.RadioButtonFor(model => model.AntiDiarrhealFrequency, false)
                    @Html.Label("Occasionally")
                
                    @Html.EditorFor(model => model.AntiDiarrhealNote, new { htmlAttributes = new { @class = "form-control border-input shortTextBox" } })
                </div>

                <div class="form-group">
                    @Html.CheckBoxFor(model => model.ColdProducts, new { @class = "col-md-1 checkboxes" })
                    @Html.Label("Cold or Sinus Products", new { @class = "col-md-2 checkboxLabels small" })

                    @Html.RadioButtonFor(model => model.ColdProductsFrequency, true)
                    @Html.Label("Regularly")

                    @Html.RadioButtonFor(model => model.ColdProductsFrequency, false)
                    @Html.Label("Occasionally")
                
                    @Html.EditorFor(model => model.ColdProductsNote, new { htmlAttributes = new { @class = "form-control border-input shortTextBox" } })
                </div>

                <div class="form-group">
                    @Html.CheckBoxFor(model => model.Antacids, new { @class = "col-md-1 checkboxes" })
                    @Html.Label("Antacids/Acid Blockers", new { @class = "col-md-2 checkboxLabels small" })

                    @Html.RadioButtonFor(model => model.AntacidsFrequency, true)
                    @Html.Label("Regularly")

                    @Html.RadioButtonFor(model => model.AntacidsFrequency, false)
                    @Html.Label("Occasionally")
                
                    @Html.EditorFor(model => model.AntiDiarrhealNote, new { htmlAttributes = new { @class = "form-control border-input shortTextBox" } })
                </div>

                <div class="form-group">
                    @Html.CheckBoxFor(model => model.Other, new { @class = "col-md-1 checkboxes" })
                    @Html.Label("Other", new { @class = "col-md-2 checkboxLabels" })

                    @Html.RadioButtonFor(model => model.OtherFrequency, true)
                    @Html.Label("Regularly")

                    @Html.RadioButtonFor(model => model.OtherFrequency, false)
                    @Html.Label("Occasionally")

                    @Html.EditorFor(model => model.Others, new { htmlAttributes = new { @class = "form-control border-input shortTextBox" } })
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-12">
                    <input type="submit" value="Update OTC Medications" class="btn btn-success logdetails" />
                </div>
            </div>

        </div>
    }

    <hr /><br />
    <p class="greenText"><b>General Medical Conditions</b></p>
    <div id="divGeneralConditions"></div>
</div><hr /><br />

<img src="@Url.Action("DisplayImage",  "Patient", new { patientId = Model.PatientId, imageName = "record1" })" alt="" /> 
<img src="@Url.Action("DisplayImage",  "Patient", new { patientId = Model.PatientId, imageName = "record2" })" alt="" /> 
<img src="@Url.Action("DisplayImage",  "Patient", new { patientId = Model.PatientId, imageName = "record3" })" alt="" /> 
<img src="@Url.Action("DisplayImage",  "Patient", new { patientId = Model.PatientId, imageName = "record4" })" alt="" /> 
<img src="@Url.Action("DisplayImage",  "Patient", new { patientId = Model.PatientId, imageName = "record5" })" alt="" /> 
<div style="margin: 0 auto; width : 1000px; height: 735px;">
    <object data="@Url.Action("PhotoEmrRecords6",  "Patient", new { patientId = Model.PatientId })" type="application/pdf" height="100%" width="100%"></object><br />
</div>

@section Scripts {
    <script src="https://clin-table-search.lhc.nlm.nih.gov/autocomplete-lhc-versions/10.2.1/autocomplete-lhc_jQuery.min.js"></script>
    <script src="//cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js" type="text/javascript"></script>

    <script type="text/javascript">

        function getParameterByName(name) {
            name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                results = regex.exec(location.search);
            return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        }


        $(document).ready(function() {

            $("#divMedicationsList").load('/CurrentMedication/_MedicationsListPartial', { patientId: @Model.PatientId });
            $("#divGeneralConditions").load('/CurrentMedication/_GeneralConditionsPartial', { patientId: @Model.PatientId });

            var medicationId = getParameterByName('medicationId');  //if we have been provided medicationId in query string, this is edit
            if (medicationId)
                $("#divAddMedication").load('/CurrentMedication/_EditMedicationPartial', { medicationId: medicationId});
            else
                $("#divAddMedication").load('/CurrentMedication/_AddMedicationPartial', { patientId: @Model.PatientId });

        });
    </script>

    @if (User.IsInRole("Liaison"))
    {
        <SCRIPT type="text/javascript">
           

            function reviewTimePost() {
                
            }
        </SCRIPT>
    }
}